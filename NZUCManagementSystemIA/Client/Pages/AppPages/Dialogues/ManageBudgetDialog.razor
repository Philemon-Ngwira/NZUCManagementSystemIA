@using NZUCManagementSystemIA.Shared.Models

@inherits ManageBudgetsBase

<MudDialog>
    <DialogContent>
        <MudForm Model="Budget">
            <MudCard Class="mb-3">
                <MudText Align="Align.Center" Typo="Typo.h3">Edit Budgets</MudText>
            </MudCard>
            <MudCard>
                <MudText Typo="Typo.h6">Fill in form</MudText>
                <MudGrid>
                    <MudItem xs="6">
                        <MudSelect T="BudgetTypeTable" @bind-Value="Budget.IncomeExpesense.TypeofBudget" ToStringFunc="BudgetTypeconverter" Label="Select Budget Type" Variant="Variant.Filled" AnchorOrigin="Origin.BottomCenter" SelectedValuesChanged="OnBudgetTypeClicked">
                            @foreach (var item in _budgettypes)
                            {
                                <MudSelectItem T="BudgetTypeTable" Value="item">@item.BudgetType</MudSelectItem>
                            }

                        </MudSelect>
                    </MudItem>
                    <MudItem xs="6">
                        <MudSelect T="IncomeExpenseBudgetType" @bind-Value="Budget.IncomeExpesense" ToStringFunc="IncomeExpesnseconverter" Label="Select Budget Type" Variant="Variant.Filled" AnchorOrigin="Origin.BottomCenter">
                            @foreach (var item in _incomeExpenses)
                            {
                                <MudSelectItem T="IncomeExpenseBudgetType" Value="item">@item.IncomeBudgetType</MudSelectItem>
                            }
                        </MudSelect>
                    </MudItem>
                    <MudItem xs="6">
                        <MudDatePicker @bind-Date="Budget.YearStart" Label="Start Date"></MudDatePicker>
                    </MudItem>
                    <MudItem xs="6">
                        <MudDatePicker @bind-Date="Budget.YearEnd" Label="Start EndDate"></MudDatePicker>
                    </MudItem>
                    <MudItem xs="6">
                        <MudNumericField @bind-Value="Budget.ActualBudget" Label="Enter Budget Amount"></MudNumericField>
                    </MudItem>
                </MudGrid>

            </MudCard>
        </MudForm>
    </DialogContent>
    <DialogActions>
        <MudButton Variant="Variant.Filled" Color="Color.Error" EndIcon="@Icons.Material.Filled.Cancel">Cancel</MudButton>
        <MudButton Variant="Variant.Filled" Color="Color.Success" EndIcon="@Icons.Material.Filled.SaveAlt">Update</MudButton>
    </DialogActions>
</MudDialog>


@code {
    [Parameter] public YearlyBudgetTable Budget { get; set; } = new();
}
